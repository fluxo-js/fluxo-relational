{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a87aeb27fa4e4fd279b9","webpack:///./src/fluxo_relational.js","webpack:///external {\"amd\":\"fluxo\",\"commonjs\":\"fluxo-js\",\"root\":\"Fluxo\"}","webpack:///./src/has_one.js","webpack:///./src/base.js","webpack:///./src/is_object.js","webpack:///./src/has_many.js","webpack:///./src/object_store.js"],"names":[],"mappings":"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","file":"fluxo_relational.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(undefined));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"fluxo\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Fluxo\"] = factory(require(\"fluxo-js\"));\n\telse\n\t\troot[\"Fluxo\"] = factory(root[\"Fluxo\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a87aeb27fa4e4fd279b9\n **/","import Fluxo from \"fluxo-js\";\nimport HasOne from \"./has_one.js\";\nimport HasMany from \"./has_many.js\";\nimport ObjectStore from \"./object_store.js\";\n\nexport default {\n  ...Fluxo,\n  Relational: {\n    HasOne: HasOne,\n    HasMany: HasMany,\n    ObjectStore: ObjectStore\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fluxo_relational.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"fluxo\",\"commonjs\":\"fluxo-js\",\"root\":\"Fluxo\"}\n ** module id = 1\n ** module chunks = 0\n **/","import Base from \"./base.js\";\nimport Fluxo from \"fluxo-js\";\n\nclass HasOne extends Base {\n  update (value) {\n    this.currentValue.set(value);\n  }\n}\n\nHasOne.defaultStoreObject = Fluxo.ObjectStore;\n\nexport default HasOne;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/has_one.js\n **/","import isObject from \"./is_object.js\";\nimport Fluxo from \"fluxo-js\";\n\nexport default class {\n  constructor (options) {\n    Fluxo.extend(this, { storeObject: this.constructor.defaultStoreObject }, options);\n  }\n\n  parse (newValue) {\n    if (!isObject(newValue) && newValue !== []) {\n      // cleaning value\n      this.cancelListening();\n      this.currentValue = newValue;\n    } else if (this.currentValue && !(newValue instanceof Fluxo.ObjectStore)) {\n      // updating the already parsed store\n      this.update(newValue);\n    } else if ((newValue instanceof Fluxo.ObjectStore)) {\n      // attaching an already parsed store\n      this.currentValue = newValue;\n      this.setupListening();\n    } else {\n      // creating store and attaching\n      this.currentValue = this.createStore(newValue);\n      this.setupListening();\n    }\n\n    return this.currentValue;\n  }\n\n  cancelListening () {\n    if (!this.changeEventCanceler) { return; }\n    this.changeEventCanceler.call();\n    delete this.changeEventCanceler;\n  }\n\n  createStore (value) {\n    return new this.storeObject(value);\n  }\n\n  setupListening () {\n    this.cancelListening();\n\n    var onStoreEvent = function (eventName, ...args) {\n      this.store.triggerEvent(`${this.key}:${eventName}`, ...args);\n    };\n\n    this.changeEventCanceler =\n      this.currentValue.on([\"*\"], onStoreEvent.bind(this));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base.js\n **/","export default function(obj) {\n  var type = typeof obj;\n  return type === \"function\" || type === \"object\" && !!obj;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/is_object.js\n **/","import Base from \"./base.js\";\nimport Fluxo from \"fluxo-js\";\n\nclass HasMany extends Base {\n  update (value) {\n    this.currentValue.setStores(value);\n  }\n}\n\nHasMany.defaultStoreObject = Fluxo.CollectionStore;\n\nexport default HasMany;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/has_many.js\n **/","import Fluxo from \"fluxo-js\";\n\nexport default class extends Fluxo.ObjectStore {\n  initialize () {\n    this.relations = { ...this.constructor.relations };\n    this.parseRelations();\n    super.initialize(...arguments);\n  }\n\n  parseRelations () {\n    for (var relationKey in this.relations) {\n      var relation = this.relations[relationKey];\n\n      this.relations[relationKey] =\n        new relation.type({\n          ...relation,\n          key: relationKey,\n          store: this\n        });\n    }\n  }\n\n  setAttribute (attribute, value, ...args) {\n    var relation = this.relations[attribute];\n\n    if (relation) {\n      value = relation.parse(value);\n    }\n\n    return super.setAttribute(attribute, value, ...args);\n  }\n\n  toJSON () {\n    var json = super.toJSON(...arguments);\n\n    for (var attributeName in json) {\n      var value = json[attributeName];\n\n      if (typeof value.toJSON === \"function\") {\n        json[attributeName] = value.toJSON();\n      }\n    }\n\n    return json;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/object_store.js\n **/"],"sourceRoot":""}