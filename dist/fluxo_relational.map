{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 50e81ceb44a5dbeba1aa","webpack:///./src/fluxo_relational.js","webpack:///external {\"amd\":\"fluxo\",\"commonjs\":\"fluxo-js\",\"root\":\"Fluxo\"}","webpack:///./src/has_one.js","webpack:///./src/base.js","webpack:///./src/is_object.js","webpack:///./src/has_many.js"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA,IAAI,KAAK,GAAG,mBAAO,CAAC,CAAU,CAAC;IAC3B,UAAU,GAAG;AACX,QAAM,EAAE,mBAAO,CAAC,CAAc,CAAC;AAC/B,SAAO,EAAE,mBAAO,CAAC,CAAe,CAAC;CAClC,CAAC;;AAEN,UAAU,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC;AAChD,OAAK,EAAE,iBAAY;AACjB,QAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AAClD,QAAI,CAAC,cAAc,EAAE,CAAC;AACtB,SAAK,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;GAChD;;AAED,gBAAc,EAAE,0BAAW;AACzB,SAAK,IAAI,WAAW,IAAI,IAAI,CAAC,SAAS,EAAE;AACtC,UAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;;AAE3C,UAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GACzB,IAAI,QAAQ,CAAC,IAAI,YAAG,GAAG,EAAE,WAAW,EAAE,KAAK,EAAE,IAAI,IAAK,QAAQ,EAAG,CAAC;KACrE;GACF;;AAED,cAAY,EAAE,sBAAS,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE;AAChD,QAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;;AAEzC,QAAI,QAAQ,EAAE;AACZ,WAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;KAC/B;;AAED,WAAO,KAAK,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;GAC7E;;AAED,QAAM,EAAE,kBAAW;AACjB,QAAI,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAE/C,SAAK,IAAI,aAAa,IAAI,IAAI,EAAE;AAC9B,UAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;;AAEhC,UAAI,OAAO,KAAK,CAAC,MAAM,KAAK,UAAU,EAAE;AACtC,YAAI,CAAC,aAAa,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;OACtC;KACF;;AAED,WAAO,IAAI,CAAC;GACb;CACF,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,gBAAQ,KAAK,IAAE,UAAU,EAAE,UAAU,GAAE,C;;;;;;AC/CrD,+C;;;;;;;;;;;;;;;;;;;;;;kCCAiB,CAAW;;;;mCACV,CAAU;;;;IAEP,MAAM;YAAN,MAAM;;WAAN,MAAM;0BAAN,MAAM;;+BAAN,MAAM;;;eAAN,MAAM;;WACb,qBAAC,KAAK,EAAE;AAClB,aAAO,qBAAM,WAAW,CAAC,MAAM,CAAE,IAAI,CAAC,WAAW,IAAI,EAAE,EAAG,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;KAC5E;;;WAEM,gBAAC,KAAK,EAAE;AACb,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC9B;;;SAPkB,MAAM;;;qBAAN,MAAM;;;;;;;;;;;;;;;;;;;uCCHN,CAAgB;;;;mCACnB,CAAU;;;;;AAGd,oBAAC,OAAO,EAAE;;;AACpB,yBAAM,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;GAC7B;;;;WAEK,eAAC,QAAQ,EAAE;AACf,UAAI,CAAC,8BAAS,QAAQ,CAAC,IAAI,QAAQ,KAAK,EAAE,EAAE;AAC1C,YAAI,CAAC,eAAe,EAAE,CAAC;AACvB,YAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;OAC9B,MAAM,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AAChD,YAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;OACvB,MAAM,IAAI,QAAQ,CAAC,MAAM,EAAE;AAC1B,YAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;AAC7B,YAAI,CAAC,cAAc,EAAE,CAAC;OACvB,MAAM;AACL,YAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AAC/C,YAAI,CAAC,cAAc,EAAE,CAAC;OACvB;;AAED,aAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;;;WAEe,2BAAG;AACjB,UAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;AAAE,eAAO;OAAE;AAC1C,UAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;AAChC,aAAO,IAAI,CAAC,mBAAmB,CAAC;KACjC;;;WAEc,0BAAG;AAChB,UAAI,CAAC,eAAe,EAAE,CAAC;;AAEvB,UAAI,YAAY,GAAG,SAAf,YAAY,CAAY,SAAS,EAAE;AACrC,YAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;;AAEpD,YAAI,CAAC,OAAO,CAAE,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,SAAS,CAAE,CAAC;;AAE3C,YAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;OACjD,CAAC;;AAEF,UAAI,CAAC,mBAAmB,GACtB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KACxD;;;;;;;;;;;;;;;;;;;qBC5CY,UAAS,GAAG,EAAE;AAC3B,MAAI,IAAI,GAAG,OAAO,GAAG,CAAC;AACtB,SAAO,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC;CAC1D;;AAAA,CAAC;;;;;;;;;;;;;;;;;;;;;;;kCCHe,CAAW;;;;mCACV,CAAU;;;;IAEP,OAAO;YAAP,OAAO;;WAAP,OAAO;0BAAP,OAAO;;+BAAP,OAAO;;;eAAP,OAAO;;WACd,qBAAC,KAAK,EAAE;AAClB,UAAI,WAAW,CAAC;;AAEhB,UAAI,IAAI,CAAC,gBAAgB,EAAE;AACzB,mBAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC;OACrC,MAAM;AACL,mBAAW,GAAG,EAAE,KAAK,EAAG,IAAI,CAAC,WAAW,IAAI,EAAG,EAAE,CAAC;OACnD;;AAED,aAAO,qBAAM,eAAe,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;KACrE;;;WAEM,gBAAC,KAAK,EAAE;AACb,UAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;KACpC;;;SAfkB,OAAO;;;qBAAP,OAAO","file":"fluxo_relational.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(undefined));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"fluxo\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Fluxo\"] = factory(require(\"fluxo-js\"));\n\telse\n\t\troot[\"Fluxo\"] = factory(root[\"Fluxo\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 50e81ceb44a5dbeba1aa\n **/","var Fluxo = require(\"fluxo-js\"),\n    Relational = {\n      HasOne: require(\"./has_one.js\"),\n      HasMany: require(\"./has_many.js\")\n    };\n\nRelational.ObjectStore = Fluxo.ObjectStore.create({\n  setup: function () {\n    this.relations = Fluxo.extend({}, this.relations);\n    this.parseRelations();\n    Fluxo.ObjectStore.setup.apply(this, arguments);\n  },\n\n  parseRelations: function() {\n    for (var relationKey in this.relations) {\n      var relation = this.relations[relationKey];\n\n      this.relations[relationKey] =\n        new relation.type({ key: relationKey, store: this, ...relation });\n    }\n  },\n\n  setAttribute: function(attribute, value, options) {\n    var relation = this.relations[attribute];\n\n    if (relation) {\n      value = relation.parse(value);\n    }\n\n    return Fluxo.ObjectStore.setAttribute.call(this, attribute, value, options);\n  },\n\n  toJSON: function() {\n    var json = Fluxo.ObjectStore.toJSON.call(this);\n\n    for (var attributeName in json) {\n      var value = json[attributeName];\n\n      if (typeof value.toJSON === \"function\") {\n        json[attributeName] = value.toJSON();\n      }\n    }\n\n    return json;\n  }\n});\n\nmodule.exports = { ...Fluxo, Relational: Relational };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fluxo_relational.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"fluxo\",\"commonjs\":\"fluxo-js\",\"root\":\"Fluxo\"}\n ** module id = 1\n ** module chunks = 0\n **/","import Base from \"./base.js\";\nimport Fluxo from \"fluxo-js\";\n\nexport default class HasOne extends Base {\n  createStore (value) {\n    return Fluxo.ObjectStore.create((this.storeObject || {}), { data: value });\n  }\n\n  update (value) {\n    this.currentValue.set(value);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/has_one.js\n **/","import isObject from \"./is_object.js\";\nimport Fluxo from \"fluxo-js\";\n\nexport default class {\n  constructor (options) {\n    Fluxo.extend(this, options);\n  }\n\n  parse (newValue) {\n    if (!isObject(newValue) && newValue !== []) {\n      this.cancelListening();\n      this.currentValue = newValue;\n    } else if (this.currentValue && !newValue._fluxo) {\n      this.update(newValue);\n    } else if (newValue._fluxo) {\n      this.currentValue = newValue;\n      this.setupListening();\n    } else {\n      this.currentValue = this.createStore(newValue);\n      this.setupListening();\n    }\n\n    return this.currentValue;\n  }\n\n  cancelListening () {\n    if (!this.changeEventCanceler) { return; }\n    this.changeEventCanceler.call();\n    delete this.changeEventCanceler;\n  }\n\n  setupListening () {\n    this.cancelListening();\n\n    var onStoreEvent = function(eventName) {\n      var args = Array.prototype.slice.call(arguments, 1);\n\n      args.unshift((this.key + \":\" + eventName));\n\n      this.store.triggerEvent.apply(this.store, args);\n    };\n\n    this.changeEventCanceler =\n      this.currentValue.on([\"*\"], onStoreEvent.bind(this));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base.js\n **/","export default function(obj) {\n  var type = typeof obj;\n  return type === \"function\" || type === \"object\" && !!obj;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/is_object.js\n **/","import Base from \"./base.js\";\nimport Fluxo from \"fluxo-js\";\n\nexport default class HasMany extends Base {\n  createStore (value) {\n    var storeObject;\n\n    if (this.collectionObject) {\n      storeObject = this.collectionObject;\n    } else {\n      storeObject = { store: (this.storeObject || {}) };\n    }\n\n    return Fluxo.CollectionStore.create(storeObject, { stores: value });\n  }\n\n  update (value) {\n    this.currentValue.setStores(value);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/has_many.js\n **/"],"sourceRoot":""}